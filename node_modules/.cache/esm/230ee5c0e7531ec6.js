_e75‍.x([["DataPointAPI",()=>DataPointAPI],["SensorAPI",()=>SensorAPI]]);require('dotenv').config()

const pg = require('pg')

const { DataSource } = require('apollo-datasource');

class DataPointAPI extends DataSource {
  constructor( {store}) {
    super( {store} );
    this.store = store;
  }

  async getDataPoint(id) {
    return this.get(`data_points/${id}`);
  }

  async getDataPoints() {
    const data = await this.get('data_points', {
        order_by: 'id',
    });
    return data.results;
  }

  async postDataPoint(dataPoint) {
      return this.post(
          'data_points',
          dataPoint,
      )
  }
}

class SensorAPI extends DataSource {
    constructor( {store}) {
        super( {store} );
        this.store = store;
    }
  
    async getSensor(id) {
      return this.get(`sensors/${id}`);
    }
  
    async getSensors() {
      const data = await this.get('sensors', {
          order_by: 'id',
      });
      return data.results;
    }

    async postSensor(sensor) {
        return this.post(
            'sensors',
            sensor,
        )
    }
}
  
